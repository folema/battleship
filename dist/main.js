(()=>{"use strict";const e=e=>{let t=e,a=()=>{switch(t){case"Carrier":return 5;case"Battleship":return 4;case"Destroyer":case"Submarine":return 3;case"Patrol boat":return 2}},r=0,n=!1;const d=()=>r===a()?(n=!0,n):(n=!1,n);return{ship:t,shipLength:a(),impact:()=>(r++,d()),sinks:d}},t=(t,a)=>{let r=t,n=a;const d=[e("Carrier"),e("Battleship"),e("Destroyer"),e("Submarine"),e("Patrol boat")];let i=(()=>{let e={a:[0,1,2,3,4,5,6,7,8,9],b:[0,1,2,3,4,5,6,7,8,9],c:[0,1,2,3,4,5,6,7,8,9],d:[0,1,2,3,4,5,6,7,8,9],e:[0,1,2,3,4,5,6,7,8,9],f:[0,1,2,3,4,5,6,7,8,9],h:[0,1,2,3,4,5,6,7,8,9],i:[0,1,2,3,4,5,6,7,8,9],j:[0,1,2,3,4,5,6,7,8,9]};const t=(t,a)=>!isNaN(e[t][a]);return{board:e,placeShip:t=>{let a=Object.keys(t.cord),r=t.horizontal;if(r){if(r){let r=Object.values(t.cord[a]);for(let n=0;n<r.length;n++)e[a][r[n]]=t.ship.ship}}else a.forEach((a=>{e[a][t.cord[a]]=t.ship.ship}))},checkavailable:e=>{let a=!0,r=Object.keys(e.cord),n=e.horizontal;return n||r.forEach((r=>t(r,e.cord[r])?void 0:(a=!1,a))),n&&Object.values(e.cord[r]).forEach((e=>t(r,e)?void 0:(a=!1,a))),a}}})(),l={a:[0,1,2,3,4,5,6,7,8,9],b:[0,1,2,3,4,5,6,7,8,9],c:[0,1,2,3,4,5,6,7,8,9],d:[0,1,2,3,4,5,6,7,8,9],e:[0,1,2,3,4,5,6,7,8,9],f:[0,1,2,3,4,5,6,7,8,9],h:[0,1,2,3,4,5,6,7,8,9],i:[0,1,2,3,4,5,6,7,8,9],j:[0,1,2,3,4,5,6,7,8,9]};return{name:r,navy:d,gameBoard:i,ai:n,oppositionBoard:l,fire:(e,t)=>{let a=Object.keys(e),r=Object.values(e);if(isNaN(l[a][r]))return"Can not fire twice at same coordinate";{let e=t.gameBoard.board[a][r];if(isNaN(e)){l[a][r]="Hit";for(let a=0;a<t.navy.length;a++)if(t.navy[a].ship===e)return t.navy[a].impact(),l;return l}return l[a][r]="Miss",l}}}},a=document.getElementById("child-container"),r=document.getElementById("child-container"),n=document.getElementById("name-input"),d=document.getElementById("startButton"),i=()=>{if(!(n.value<=0)){d.removeEventListener("click",i);const e=t(n.value,!1),l=t("Macintosh",!0);return(()=>{for(;a.firstChild;)a.removeChild(a.firstChild)})(),(e=>{const t=document.createElement("div");t.id="game-controls-container",t.className="game-controls-container";const a=document.createElement("div");a.className="display-div",a.id="display-div";const n=document.createElement("h3");n.className="display",n.id="display",a.appendChild(n),t.appendChild(a);let d=e.gameBoard.board,i=Object.keys(d);const l=document.createElement("div");l.className="friendly-waters",l.id="friendly-waters",i.forEach((e=>{for(let t=0;t<d[e].length;t++){let a=document.createElement("div");a.className="tile",a.id=`${e}${d[e][t]}`,l.appendChild(a)}})),t.appendChild(l),r.appendChild(t)})(e),(e=>{let t=!1;const a=document.getElementById("game-controls-container"),r=document.getElementById("display"),n=document.querySelectorAll(".tile"),d=document.createElement("div"),i=document.createElement("button");i.textContent="Change axis",a.appendChild(i),d.className="shipyard",d.id="shipyard",a.appendChild(d);let l=0;const o=t=>{if(t>=5)return console.log(e.gameBoard.board);{r.textContent="";let a=document.createElement("div");a.id=e.navy[t].ship,a.className="ship",a.style.height=`${e.navy[t].shipLength}rem`,a.style.width="2rem",a.draggable=!0,a.addEventListener("dragstart",(e=>(e=>{e.dataTransfer.clearData(),e.dataTransfer.setData("Text",e.target.id)})(e))),d.appendChild(a),r.textContent=`Admiral ${e.name}, place your ${e.navy[t].ship}`}};n.forEach((t=>{t.addEventListener("dragover",(e=>(e=>{e.preventDefault(),e.target.style.backgroundColor="gray"})(e))),t.addEventListener("dragleave",(e=>(e=>{e.preventDefault(),e.target.style.backgroundColor="white"})(e))),t.addEventListener("dragover",(e=>(e=>{e.preventDefault()})(e))),t.addEventListener("drop",(t=>(t=>{let a=document.querySelector(".ship"),r=t.dataTransfer.getData("Text"),n=document.getElementById(r),d=c(l,t.target.id),i=e.gameBoard.checkavailable(d);return(i=!1)?void 0:(a.classList.remove("ship"),a.style.className="placed-ship",t.target.appendChild(n),l++,o(l),e.gameBoard.placeShip(d),l)})(t)))}));const c=(a,r)=>{const n="abcdefghij";let d=r.charAt(0),i=+r.charAt(1),l=[],o={ship:e.navy[a],cord:{},horizontal:t},c=e.navy[a].shipLength;if(!1===t){for(let e=0;e<n.length;e++)if(n[e]===d)for(let e=0;e<c;e++)o.cord[n[e]]=[i];return o}if(!0===t){for(let e=i;e<i+c;e++)l.push(e);return o.cord[d]=l,o}return o};i.addEventListener("click",(()=>{let e=document.querySelector(".ship");return t?t?(t=!1,e.style.rotate="0deg",console.log(t),t):t:(t=!0,e.style.rotate="90deg",console.log(t),t)})),o(l)})(e),l}alert("Enter player name")};document.getElementById("startButton").addEventListener("click",i)})();